Building DAG of jobs...
Using shell: /bin/bash
Provided cluster nodes: 100
Job stats:
job                                      count    min threads    max threads
-------------------------------------  -------  -------------  -------------
align_filter_sample                          4             12             12
align_filter_sample_spikein                  4             12             12
align_filter_subsample_sample                4             12             12
align_filter_subsample_sample_spikein        4             12             12
all                                          1              1              1
bamCoverage                                  2             12             12
bamCoverage_spike                            2             12             12
bamCoverage_spike_summary                    1              1              1
bamCoverage_summary                          1              1              1
bowtieR1                                     4             12             12
bowtieR1_summmary                            1              1              1
bowtie_counts_spikein                        4              1              1
calculating_subsample_group                  2              1              1
calculating_subsample_summary                1              1              1
cutadapt                                     4              6              6
cutadapt_summary                             1              1              1
dedup_UMI                                    4              1              1
gathering_results                            1              1              1
subsample_dedup                              4             16             16
total                                       49              1             16

Select jobs to execute...

[Thu Dec 21 13:00:14 2023]
Job 17: Running cutadapt on PP1H66KpDoxS2Ser5

Submitted DRMAA job 17 with external jobid 588300.

[Thu Dec 21 13:00:14 2023]
Job 13: Running cutadapt on PP1H66KpDS2Ser53

Submitted DRMAA job 13 with external jobid 588301.

[Thu Dec 21 13:00:14 2023]
Job 11: Running cutadapt on PP1H66KmDS2Ser53

Submitted DRMAA job 11 with external jobid 588302.

[Thu Dec 21 13:00:14 2023]
Job 15: Running cutadapt on PP1H66KmDoxS2Ser5

Submitted DRMAA job 15 with external jobid 588303.
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_R2_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_R1_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_R2.fastq.gz.
[Thu Dec 21 13:01:54 2023]
Finished job 17.
1 of 49 steps (2%) done
Select jobs to execute...

[Thu Dec 21 13:01:54 2023]
Job 23: Aligning reads with Bowtie2 for PP1H66KpDoxS2Ser5

Submitted DRMAA job 23 with external jobid 588304.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_R1_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_R2_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_R2.fastq.gz.
[Thu Dec 21 13:01:54 2023]
Finished job 13.
2 of 49 steps (4%) done
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_R1_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_R2_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_R2.fastq.gz.
[Thu Dec 21 13:01:54 2023]
Finished job 11.
3 of 49 steps (6%) done
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_R2_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_R1_umi.fastq.gz.
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_R2.fastq.gz.
[Thu Dec 21 13:01:54 2023]
Finished job 15.
4 of 49 steps (8%) done
Select jobs to execute...

[Thu Dec 21 13:01:54 2023]
Job 10: Creating Temp_NET cutadapt summary

Submitted DRMAA job 10 with external jobid 588305.

[Thu Dec 21 13:01:54 2023]
Job 20: Aligning reads with Bowtie2 for PP1H66KmDS2Ser53

Submitted DRMAA job 20 with external jobid 588306.

[Thu Dec 21 13:01:54 2023]
Job 22: Aligning reads with Bowtie2 for PP1H66KmDoxS2Ser5

Submitted DRMAA job 22 with external jobid 588307.

[Thu Dec 21 13:01:54 2023]
Job 21: Aligning reads with Bowtie2 for PP1H66KpDS2Ser53

Submitted DRMAA job 21 with external jobid 588308.
[Thu Dec 21 13:02:04 2023]
Finished job 10.
5 of 49 steps (10%) done
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_R1.fastq.gz.
[Thu Dec 21 13:04:04 2023]
Finished job 23.
6 of 49 steps (12%) done
Select jobs to execute...

[Thu Dec 21 13:04:04 2023]
Job 39: Removing duplicates for PP1H66KpDoxS2Ser5

Submitted DRMAA job 39 with external jobid 588310.
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_R1.fastq.gz.
[Thu Dec 21 13:04:04 2023]
Finished job 22.
7 of 49 steps (14%) done
Select jobs to execute...

[Thu Dec 21 13:04:04 2023]
Job 35: Removing duplicates for PP1H66KmDoxS2Ser5

Submitted DRMAA job 35 with external jobid 588311.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_R1.fastq.gz.
[Thu Dec 21 13:04:14 2023]
Finished job 21.
8 of 49 steps (16%) done
Select jobs to execute...

[Thu Dec 21 13:04:14 2023]
Job 31: Removing duplicates for PP1H66KpDS2Ser53

Submitted DRMAA job 31 with external jobid 588312.
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_R1.fastq.gz.
[Thu Dec 21 13:04:44 2023]
Finished job 20.
9 of 49 steps (18%) done
Select jobs to execute...

[Thu Dec 21 13:04:44 2023]
Job 19:  R1 summmary Bowtie2 

Submitted DRMAA job 19 with external jobid 588313.

[Thu Dec 21 13:04:45 2023]
Job 27: Removing duplicates for PP1H66KmDS2Ser53

Submitted DRMAA job 27 with external jobid 588314.
[Thu Dec 21 13:04:54 2023]
Finished job 19.
10 of 49 steps (20%) done
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_hg38_mm10.bam.bai.
Removing temporary output file Temp_NET/PP1H66KmDoxS2Ser5_hg38_mm10.bam.
[Thu Dec 21 13:07:45 2023]
Finished job 35.
11 of 49 steps (22%) done
Select jobs to execute...

[Thu Dec 21 13:07:45 2023]
Job 36: filtering spike in reads PP1H66KmDoxS2Ser5

Submitted DRMAA job 36 with external jobid 588316.

[Thu Dec 21 13:07:45 2023]
Job 34: filtering reads PP1H66KmDoxS2Ser5

Submitted DRMAA job 34 with external jobid 588317.
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_hg38_mm10.bam.
Removing temporary output file Temp_NET/PP1H66KpDoxS2Ser5_hg38_mm10.bam.bai.
[Thu Dec 21 13:07:55 2023]
Finished job 39.
12 of 49 steps (24%) done
Select jobs to execute...

[Thu Dec 21 13:07:55 2023]
Job 46: getting subsample norm for PP1H66KSer5-r2

Submitted DRMAA job 46 with external jobid 588318.

[Thu Dec 21 13:07:55 2023]
Job 38: filtering reads PP1H66KpDoxS2Ser5

Submitted DRMAA job 38 with external jobid 588319.

[Thu Dec 21 13:07:55 2023]
Job 40: filtering spike in reads PP1H66KpDoxS2Ser5

Submitted DRMAA job 40 with external jobid 588320.
[Thu Dec 21 13:08:05 2023]
Finished job 36.
13 of 49 steps (27%) done
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_hg38_mm10_dedup.txt.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_hg38_mm10_dedup.txt.
[Thu Dec 21 13:08:15 2023]
Finished job 46.
14 of 49 steps (29%) done
[Thu Dec 21 13:08:15 2023]
Finished job 40.
15 of 49 steps (31%) done
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_temp2.bam.
[Thu Dec 21 13:08:25 2023]
Finished job 34.
16 of 49 steps (33%) done
Select jobs to execute...

[Thu Dec 21 13:08:25 2023]
Job 33: Bowtie2 counts_spikin for PP1H66KmDoxS2Ser5

Submitted DRMAA job 33 with external jobid 588321.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_hg38_mm10.bam.
Removing temporary output file Temp_NET/PP1H66KpDS2Ser53_hg38_mm10.bam.bai.
[Thu Dec 21 13:08:35 2023]
Finished job 31.
17 of 49 steps (35%) done
Select jobs to execute...

[Thu Dec 21 13:08:35 2023]
Job 32: filtering spike in reads PP1H66KpDS2Ser53

Submitted DRMAA job 32 with external jobid 588322.

[Thu Dec 21 13:08:35 2023]
Job 30: filtering reads PP1H66KpDS2Ser53

Submitted DRMAA job 30 with external jobid 588323.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_temp2.bam.
[Thu Dec 21 13:08:35 2023]
Finished job 38.
18 of 49 steps (37%) done
Select jobs to execute...

[Thu Dec 21 13:08:35 2023]
Job 37: Bowtie2 counts_spikin for PP1H66KpDoxS2Ser5

Submitted DRMAA job 37 with external jobid 588324.
[Thu Dec 21 13:08:45 2023]
Finished job 33.
19 of 49 steps (39%) done
[Thu Dec 21 13:08:55 2023]
Finished job 32.
20 of 49 steps (41%) done
[Thu Dec 21 13:08:55 2023]
Finished job 37.
21 of 49 steps (43%) done
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_temp2.bam.
[Thu Dec 21 13:09:25 2023]
Finished job 30.
22 of 49 steps (45%) done
Select jobs to execute...

[Thu Dec 21 13:09:25 2023]
Job 29: Bowtie2 counts_spikin for PP1H66KpDS2Ser53

Submitted DRMAA job 29 with external jobid 588325.
[Thu Dec 21 13:09:45 2023]
Finished job 29.
23 of 49 steps (47%) done
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_hg38_mm10.bam.bai.
Removing temporary output file Temp_NET/PP1H66KmDS2Ser53_hg38_mm10.bam.
[Thu Dec 21 13:10:05 2023]
Finished job 27.
24 of 49 steps (49%) done
Select jobs to execute...

[Thu Dec 21 13:10:06 2023]
Job 28: filtering spike in reads PP1H66KmDS2Ser53

Submitted DRMAA job 28 with external jobid 588326.

[Thu Dec 21 13:10:06 2023]
Job 26: filtering reads PP1H66KmDS2Ser53

Submitted DRMAA job 26 with external jobid 588327.

[Thu Dec 21 13:10:06 2023]
Job 47: getting subsample norm for PP1H66KSer5-r3

Submitted DRMAA job 47 with external jobid 588328.
Removing temporary output file Temp_NET/bams/PP1H66KmDS2Ser53_hg38_mm10_dedup.txt.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_hg38_mm10_dedup.txt.
[Thu Dec 21 13:10:15 2023]
Finished job 47.
25 of 49 steps (51%) done
Select jobs to execute...

[Thu Dec 21 13:10:15 2023]
Job 45: Creating Temp_NET subsample summary

Submitted DRMAA job 45 with external jobid 588329.
[Thu Dec 21 13:10:25 2023]
Finished job 28.
26 of 49 steps (53%) done
Removing temporary output file Temp_NET/bams/PP1H66KSer5-r2_hg38_mm10_subsample_frac.txt.
Removing temporary output file Temp_NET/bams/PP1H66KSer5-r3_hg38_mm10_subsample_frac.txt.
[Thu Dec 21 13:10:26 2023]
Finished job 45.
27 of 49 steps (55%) done
Select jobs to execute...

[Thu Dec 21 13:10:26 2023]
Job 52: Subsampling UMI_dedup reads for PP1H66KmDS2Ser53 INDEX_MAP 

Submitted DRMAA job 52 with external jobid 588330.

[Thu Dec 21 13:10:26 2023]
Job 54: Subsampling UMI_dedup reads for PP1H66KpDS2Ser53 INDEX_MAP 

Submitted DRMAA job 54 with external jobid 588331.

[Thu Dec 21 13:10:26 2023]
Job 49: Subsampling UMI_dedup reads for PP1H66KpDoxS2Ser5 INDEX_MAP 

Submitted DRMAA job 49 with external jobid 588332.

[Thu Dec 21 13:10:26 2023]
Job 44: Subsampling UMI_dedup reads for PP1H66KmDoxS2Ser5 INDEX_MAP 

Submitted DRMAA job 44 with external jobid 588333.
[Thu Dec 21 13:10:56 2023]
Finished job 52.
28 of 49 steps (57%) done
Select jobs to execute...

[Thu Dec 21 13:10:56 2023]
Job 60: filtering spikeaIN subsample reads PP1H66KmDS2Ser53

Submitted DRMAA job 60 with external jobid 588335.

[Thu Dec 21 13:10:56 2023]
Job 51: filtering subsample reads PP1H66KmDS2Ser53

Submitted DRMAA job 51 with external jobid 588336.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_hg38_mm10_230426_dedup.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_hg38_mm10_230426_dedup.bam.bai.
[Thu Dec 21 13:10:56 2023]
Finished job 54.
29 of 49 steps (59%) done
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_hg38_mm10_230426_dedup.bam.bai.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_hg38_mm10_230426_dedup.bam.
[Thu Dec 21 13:10:56 2023]
Finished job 49.
30 of 49 steps (61%) done
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_hg38_mm10_230426_dedup.bam.bai.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_hg38_mm10_230426_dedup.bam.
[Thu Dec 21 13:10:56 2023]
Finished job 44.
31 of 49 steps (63%) done
Select jobs to execute...

[Thu Dec 21 13:10:56 2023]
Job 57: filtering spikeaIN subsample reads PP1H66KmDoxS2Ser5

Submitted DRMAA job 57 with external jobid 588337.

[Thu Dec 21 13:10:56 2023]
Job 61: filtering spikeaIN subsample reads PP1H66KpDS2Ser53

Submitted DRMAA job 61 with external jobid 588338.

[Thu Dec 21 13:10:56 2023]
Job 58: filtering spikeaIN subsample reads PP1H66KpDoxS2Ser5

Submitted DRMAA job 58 with external jobid 588339.

[Thu Dec 21 13:10:56 2023]
Job 43: filtering subsample reads PP1H66KmDoxS2Ser5

Submitted DRMAA job 43 with external jobid 588340.

[Thu Dec 21 13:10:56 2023]
Job 48: filtering subsample reads PP1H66KpDoxS2Ser5

Submitted DRMAA job 48 with external jobid 588341.

[Thu Dec 21 13:10:56 2023]
Job 53: filtering subsample reads PP1H66KpDS2Ser53

Submitted DRMAA job 53 with external jobid 588342.
Removing temporary output file Temp_NET/bams/PP1H66KmDS2Ser53_hg38_mm10_230426_dedup.bam.bai.
Removing temporary output file Temp_NET/bams/PP1H66KmDS2Ser53_hg38_mm10_230426_dedup.bam.
Removing temporary output file Temp_NET/bams/PP1H66KmDS2Ser53_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KmDS2Ser53_temp2.bam.
[Thu Dec 21 13:11:16 2023]
Finished job 26.
32 of 49 steps (65%) done
Select jobs to execute...

[Thu Dec 21 13:11:16 2023]
Job 25: Bowtie2 counts_spikin for PP1H66KmDS2Ser53

Submitted DRMAA job 25 with external jobid 588343.
Removing temporary output file Temp_NET/bams_sub/PP1H66KmDS2Ser53_mm10_subsample.txt.
[Thu Dec 21 13:11:16 2023]
Finished job 60.
33 of 49 steps (67%) done
Removing temporary output file Temp_NET/bams_sub/PP1H66KmDoxS2Ser5_mm10_subsample.txt.
[Thu Dec 21 13:11:16 2023]
Finished job 57.
34 of 49 steps (69%) done
Removing temporary output file Temp_NET/bams_sub/PP1H66KpDS2Ser53_mm10_subsample.txt.
[Thu Dec 21 13:11:16 2023]
Finished job 61.
35 of 49 steps (71%) done
Removing temporary output file Temp_NET/bams_sub/PP1H66KpDoxS2Ser5_mm10_subsample.txt.
[Thu Dec 21 13:11:16 2023]
Finished job 58.
36 of 49 steps (73%) done
[Thu Dec 21 13:11:36 2023]
Error in rule align_filter_subsample_sample:
    jobid: 51
    output: Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_230426.bam, Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_230426.bam.bai, Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_subsample.txt, Temp_NET/bams/PP1H66KmDS2Ser53_temp.bam, Temp_NET/bams/PP1H66KmDS2Ser53_temp2.bam
    log: Temp_NET/logs/PP1H66KmDS2Ser53_align_filter_subsample.out, Temp_NET/logs/PP1H66KmDS2Ser53_align_filter_subsample.err (check log file(s) for error message)
    shell:
        
        # filter
        samtools view Temp_NET/bams/PP1H66KmDS2Ser53_hg38_mm10_230426_subsample.bam $(head -n1 /beevol/home/erickson/ref/hg38_mm10/hg38.txt)         | samtools view -bT /beevol/home/erickson/ref/hg38/Homo_sapiens.GRCh38.dna.primary_assembly.UCSC.fa -         | samtools view -L /beevol/home/erickson/ref/hg38/ref/hg38_snoRNAs.bed -b - -U Temp_NET/bams/PP1H66KmDS2Ser53_temp.bam > Temp_NET/bams/PP1H66KmDS2Ser53_temp2.bam
        
        samtools sort Temp_NET/bams/PP1H66KmDS2Ser53_temp.bam -T Temp_NET/PP1H66KmDS2Ser53.temp -@ 12 -O bam         > Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_230426.bam
        
        samtools index -@ 12 Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_230426.bam
        
        echo "PP1H66KmDS2Ser53_hg38 Sampled_reads $(samtools idxstats Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_230426.bam | awk '{s+=$3} END {print s}')" >> Temp_NET/bams_sub/PP1H66KmDS2Ser53_hg38_subsample.txt
        
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Error executing rule align_filter_subsample_sample on cluster (jobid: 51, external: 588336, jobscript: /beevol/home/erickson/Ben_pipelines/snakemake_pipelines/.snakemake/tmp.maouh4z3/snakejob.align_filter_subsample_sample.51.sh). For error details see the cluster log and the log files of the involved rule(s).
[Thu Dec 21 13:11:36 2023]
Finished job 25.
37 of 49 steps (76%) done
Select jobs to execute...

[Thu Dec 21 13:11:36 2023]
Job 24: getting final results

Submitted DRMAA job 24 with external jobid 588344.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_hg38_mm10_230426_subsample.bam.bai.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_hg38_mm10_230426_subsample.bam.
Removing temporary output file Temp_NET/bams_sub/PP1H66KmDoxS2Ser5_hg38_subsample.txt.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KmDoxS2Ser5_temp2.bam.
[Thu Dec 21 13:11:36 2023]
Finished job 43.
38 of 49 steps (78%) done
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_hg38_mm10_230426_subsample.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_hg38_mm10_230426_subsample.bam.bai.
Removing temporary output file Temp_NET/bams_sub/PP1H66KpDoxS2Ser5_hg38_subsample.txt.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDoxS2Ser5_temp2.bam.
[Thu Dec 21 13:11:46 2023]
Finished job 48.
39 of 49 steps (80%) done
[Thu Dec 21 13:11:46 2023]
Finished job 24.
40 of 49 steps (82%) done
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_hg38_mm10_230426_subsample.bam.bai.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_hg38_mm10_230426_subsample.bam.
Removing temporary output file Temp_NET/bams_sub/PP1H66KpDS2Ser53_hg38_subsample.txt.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_temp.bam.
Removing temporary output file Temp_NET/bams/PP1H66KpDS2Ser53_temp2.bam.
[Thu Dec 21 13:11:56 2023]
Finished job 53.
41 of 49 steps (84%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /beevol/home/erickson/Ben_pipelines/snakemake_pipelines/.snakemake/log/2023-12-21T130012.657139.snakemake.log
