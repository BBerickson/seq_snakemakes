{"version": null, "code": "gASV/AcAAAAAAAAoQxJ0AGQBfA58EWQCjQMBAGQAUwCUKIwFaW5wdXSUjAZvdXRwdXSUjAZwYXJhbXOUjAl3aWxkY2FyZHOUjAd0aHJlYWRzlIwJcmVzb3VyY2VzlIwDbG9nlIwHdmVyc2lvbpSMBHJ1bGWUjAljb25kYV9lbnaUjA1jb250YWluZXJfaW1nlIwQc2luZ3VsYXJpdHlfYXJnc5SMD3VzZV9zaW5ndWxhcml0eZSMC2Vudl9tb2R1bGVzlIwMYmVuY2hfcmVjb3JklIwFam9iaWSUjAhpc19zaGVsbJSMD2JlbmNoX2l0ZXJhdGlvbpSMD2NsZWFudXBfc2NyaXB0c5SMCnNoYWRvd19kaXKUjA1lZGl0X25vdGVib29rlIwPY29uZGFfYmFzZV9wYXRolIwHYmFzZWRpcpSMGHJ1bnRpbWVfc291cmNlY2FjaGVfcGF0aJSMGF9faXNfc25ha2VtYWtlX3J1bGVfZnVuY5R0lF2UKE5YbgYAAAogICAgICAgIHRtcF9kaXI9JChkaXJuYW1lIHtvdXRwdXQud2luc30pCgogICAgICAgICMgQ3JlYXRlIHdpbmRvd3MgZm9yIHRoZSByZWdpb24gYXJvdW5kIHBhdXNlIHNpdGVzCiAgICAgICAgdG1wX3dpbnM9JChta3RlbXAgLXAgJHRtcF9kaXIgd2lucy5YWFhYWCkKCiAgICAgICAgbWFrZV93aW5zKCkge3sKICAgICAgICAgICAgbG9jYWwgcGF1c2VzPSQxCiAgICAgICAgICAgIGxvY2FsIHN0cmFuZD0kMgogICAgICAgICAgICBsb2NhbCBhcmdzPSIkMyIKCiAgICAgICAgICAgIHpjYXQgJHBhdXNlcyAgICAgICAgICAgICAgICAgfCBhd2sgLXYgT0ZTPSIJIiAtdiBzdHJhbmQ9JHN0cmFuZCAnKCQ2ID09IHN0cmFuZCkge3skNCA9ICQ0IioiJDUiKiI7IHByaW50fX0nICAgICAgICAgICAgICAgICB8IGJlZHRvb2xzIHNsb3AgLXMgLWcge3BhcmFtcy5jaHJvbXN9IC1sIDQ5IC1yIDUwICAgICAgICAgICAgICAgICB8IGJlZHRvb2xzIG1ha2V3aW5kb3dzIC1iIC0gJGFyZ3MgICAgICAgICAgICAgICAgIHwgYXdrIC12IEZTPSJcKl8iIC12IE9GUz0iCSIgLXYgc3RyYW5kPSRzdHJhbmQgJ3t7cHJpbnQgJDEsICQyLCBzdHJhbmR9fScKICAgICAgICB9fQoKICAgICAgICBtYWtlX3dpbnMge2lucHV0LnBhdXNlc30gIisiICIgLW4gMTAwIC1pIHNyY3dpbm51bSAiICAgICAgICAgICAgID4gJHRtcF93aW5zCgogICAgICAgIG1ha2Vfd2lucyB7aW5wdXQucGF1c2VzfSAiLSIgIiAtcmV2ZXJzZSAtbiAxMDAgLWkgc3Jjd2lubnVtICIgICAgICAgICAgICAgPj4gJHRtcF93aW5zCgogICAgICAgIGNhdCAkdG1wX3dpbnMgICAgICAgICAgICAgfCBzb3J0IC1TMUcgLS1wYXJhbGxlbD17dGhyZWFkc30gLWsxLDEgLWsyLDJuICAgICAgICAgICAgIHwgcGlneiAtcCB7dGhyZWFkc30gICAgICAgICAgICAgPiB7b3V0cHV0LndpbnN9CgogICAgICAgIHJtICR0bXBfd2lucwoKICAgICAgICAjIEludGVyc2VjdCByZWFkcyB3aXRoIHBhdXNlIHdpbmRvd3MgCiAgICAgICAgdG1wX3JlYWRzPSQobWt0ZW1wIC1wICR0bXBfZGlyIHRtcF9yZWFkcy5YWFhYWCkKICAgICAgICB0bXBfYmVkPSQobWt0ZW1wIC1wICR0bXBfZGlyIHRtcF9iZWQuWFhYWFgpCiAgICAgICAgCiAgICAgICAgemNhdCAtZiB7aW5wdXQucmVhZHN9ICAgICAgICAgICAgID4gJHRtcF9yZWFkcwogICAgICAgIAogICAgICAgIGNhdCAkdG1wX3JlYWRzICAgICAgICAgICAgIHwgYmVkdG9vbHMgaW50ZXJzZWN0IC1zb3J0ZWQgLXdhIC1jIC1hIHtvdXRwdXQud2luc30gLWIgLSAtcyAgICAgICAgICAgICB8IHNvcnQgLVMxRyAtLXBhcmFsbGVsPXt0aHJlYWRzfSAtazEsMSAtazIsMm4gICAgICAgICAgICAgPiAkdG1wX2JlZAoKICAgICAgICB7U1JDfS9ub3JtX2JlZCAkdG1wX3JlYWRzICR0bXBfYmVkIDcgLWxlbiAgICAgICAgICAgICB8IHNvcnQgLVMxRyAtLXBhcmFsbGVsPXt0aHJlYWRzfSAtazEsMSAtazIsMm4gICAgICAgICAgICAgfCBwaWd6IC1wIHt0aHJlYWRzfSAgICAgICAgICAgICA+IHtvdXRwdXQuY291bnRzX059CgogICAgICAgIGNhdCAkdG1wX2JlZCAgICAgICAgICAgICB8IHBpZ3ogLXAge3RocmVhZHN9ICAgICAgICAgICAgID4ge291dHB1dC5jb3VudHN9IAoKICAgICAgICBybSAkdG1wX3JlYWRzICR0bXBfYmVkCiAgICAgICAglGgPaBKGlGWMBXNoZWxslIWUdJQu", "rule": "pause_metaplots", "input": ["Xrn2/beds/293flpin_Xrn2_WT_R3_xrn2-r3_tss.bed.gz", "Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_sep_pauses.bed.gz"], "log": ["Xrn2/logs/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pause_metaplots.err", "Xrn2/logs/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pause_metaplots.out"], "params": ["'/beevol/home/erickson/ref/hg38/Homo_sapiens.GRCh38.dna.primary_assembly.UCSC.fa.fai'", "'293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pause_metaplots'", "32"], "shellcmd": "\n        tmp_dir=$(dirname Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pauses_wins.bed.gz)\n\n        # Create windows for the region around pause sites\n        tmp_wins=$(mktemp -p $tmp_dir wins.XXXXX)\n\n        make_wins() {\n            local pauses=$1\n            local strand=$2\n            local args=\"$3\"\n\n            zcat $pauses                 | awk -v OFS=\"\t\" -v strand=$strand '($6 == strand) {$4 = $4\"*\"$5\"*\"; print}'                 | bedtools slop -s -g /beevol/home/erickson/ref/hg38/Homo_sapiens.GRCh38.dna.primary_assembly.UCSC.fa.fai -l 49 -r 50                 | bedtools makewindows -b - $args                 | awk -v FS=\"\\*_\" -v OFS=\"\t\" -v strand=$strand '{print $1, $2, strand}'\n        }\n\n        make_wins Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_sep_pauses.bed.gz \"+\" \" -n 100 -i srcwinnum \"             > $tmp_wins\n\n        make_wins Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_sep_pauses.bed.gz \"-\" \" -reverse -n 100 -i srcwinnum \"             >> $tmp_wins\n\n        cat $tmp_wins             | sort -S1G --parallel=6 -k1,1 -k2,2n             | pigz -p 6             > Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pauses_wins.bed.gz\n\n        rm $tmp_wins\n\n        # Intersect reads with pause windows \n        tmp_reads=$(mktemp -p $tmp_dir tmp_reads.XXXXX)\n        tmp_bed=$(mktemp -p $tmp_dir tmp_bed.XXXXX)\n        \n        zcat -f Xrn2/beds/293flpin_Xrn2_WT_R3_xrn2-r3_tss.bed.gz             > $tmp_reads\n        \n        cat $tmp_reads             | bedtools intersect -sorted -wa -c -a Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pauses_wins.bed.gz -b - -s             | sort -S1G --parallel=6 -k1,1 -k2,2n             > $tmp_bed\n\n        src/norm_bed $tmp_reads $tmp_bed 7 -len             | sort -S1G --parallel=6 -k1,1 -k2,2n             | pigz -p 6             > Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pauses_meta_N.bed.gz\n\n        cat $tmp_bed             | pigz -p 6             > Xrn2/pauses/293flpin_Xrn2_WT_R3_xrn2-r3_tss_200_pauses_meta.bed.gz \n\n        rm $tmp_reads $tmp_bed\n        ", "incomplete": false, "starttime": 1691092757.0, "endtime": 1691092785.0, "job_hash": 2989786940351, "conda_env": null, "container_img_url": null}