#===== Config file containing samples ==========================================
# This gets appended to config

# Project name to use for naming summary files
PROJ:
    "Xrn2"
    
SEQ_DATE:
  "220215_220218"

# Directories containing fastq files, this can be a relative path.
# Multiple directories can be provided. The sample names must correspond
# to the begining of the fastq name.
RAW_DATA:
    - "/beevol/home/erickson/Human/NetSeq/220215_220218_Xrn2_CTD_hg38/raw_data"

# Sample groups. 
# The sample names must match the beginning of a fastq file in one of the
# directories listed under RAW_DATA. If the sample name
# matches multiple fastqs, an error will be thrown.
#
# group-name-1:
#     - "sample_1_file_prefix"
#     - "input_1_file_prefix"
#
# group-name-2:
#     - "sample_2_file_prefix"
#     - "input_2_file_prefix"
#
SAMPLES:
    xrn2-r2:
        - "293flpin_Xrn2_WT_R2"
        - "293flpin_Xrn2_MT_R2"

    xrn2-r3:
        - "293flpin_Xrn2_WT_R3"
        - "293flpin_Xrn2_MT_R3"

    xrn2-r4:
        - "293flpin_Xrn2_WT_R4"
        - "293flpin_Xrn2_MT_R4"
groups:
   - "Xrn2_WT"
   - "Xrn2_MT"


# sandbox User #
USER:
  "User7"

SINGULARITY:
  ""
  
# Base memory to request for each rule
# The acutal amount requested will be higher for rules that generally
# require more memory
# A value of 8 will result in rules requesting between 8Gb - 32Gb of
# request ~2Gb/GB of fastq.gz file
# memory
MEMORY:
    32

# program options  
CMD_PARAMS:
    cutadapt:      " --pair-filter=first --discard-untrimmed --minimum-length 15 -O 10 -a 'AACTGTAGGCACCATCAAT' -A 'GATCGTCGGACTGTAGAACTCTGAAC' "
    umi_pattern:   "NNNNNNNNNNNN"
    umi_tools:     " --method unique --read-length "
    bowtie2:      " --end-to-end "
    bamCoverage:  " --binSize 1 --normalizeUsing None --skipNonCoveredRegions --Offset -1 " # --Offset -1 = 3' --Offset 1 = 5'
    featureCounts: " --extraAttributes 'gene_name,gene_biotype' -s 0 -t gene -O "

# file suffix
#   ".fa.gz"
#   ".fastq.gz"
SFX:
  ".fastq.gz"

# set colors for bw urls and table files, if missing 0,0,0 is default
# COLORS:
#  - "225,0,0"
#  - "0,225,0"
#  - "0,0,225"
COLORS:
  - "166,206,22"
  - "31,120,180"
  - "178,223,138"
  - "51,160,44"
  - "251,154,153"
  - "227,26,28"
  - "253,191,111"
  - "255,127,0"
  - "202,178,214"
  - "106,61,154"
  - "255,55,153"
  - "177,89,40"
  - "225,0,0"
  - "0,225,0"
  - "0,0,225"
      
# Window sizes to use for finding pauses
# provide multiple sizes to generate results for multiple different window sizes
WIN_SIZE:
    - 200

# File label to use for strong pauses
STRENGTH_GROUPS:
    - "_strong_"

# Maximum searching round for strong pauses
PAUSE_ROUND:
    - 1

# Plotting parameters
params:
  overwrite:         true                                                                 # Overwrite saved R objects
  
  template_dir:      "src/Rmds"                                                               # Directory containing Rmd templates
  obj_dir:           "objects"                                                            # Directory to save R objects
  tab_dir:           "tables"                                                             # Directory to save tables
  
  pause_strength:    "_strong_"                                                           # Pause strength label to use for loading input files
  pause_win:         200
  gene_min_pct:      0.1                                                                  # Fraction of lowest expressing genes to exclude
  pause_lims:        [0, 1]                                                               # Min pauses for filtering TSS boxplots (1st value) and scatter plots (2nd value)
  tss_lim:           1                                                                    # Min number of raw reads for TSS boxplots
  body_lim:          1                                                                    # Min number of reads/kb for gene body region
  only_shared:       true                                                                 # Only include genes in TSS boxplots that have data for all regions
  
  
## Additional common parameters for various processing steps
#### Cutadapt ####
# --pair-filter=first - read filtering decisions are made based solely on R1
# --dicard-untrimmed  - remove reads that do not contain an adapter
# --minimum-length    - remove reads that are shorter than given value
# -O                  - minimum overlap to trim adapter
# -a                  - adapter sequence for R1
# -A                  - adapter sequence for R2
#
# umi tools
# --method unique     - only remove read if the UMI sequence is an exact match
# --read-length       - use read length when removing duplicates
#
# featureCounts
# -s 0                - strandedness for read assignment; 0, unstranded
# -t gene             - feature type for counting
# -O                  - count if aligned to multiple features
### Bowtie2 ###
# 
# --end-to-end       entire read must align; no clipping (on)
# OR
# --local            local alignment; ends might be soft clipped (off)
# Presets:                 Same as:
#   For --end-to-end:
#   --very-fast            -D 5 -R 1 -N 0 -L 22 -i S,0,2.50
#   --fast                 -D 10 -R 2 -N 0 -L 22 -i S,0,2.50
#   --sensitive            -D 15 -R 2 -N 0 -L 22 -i S,1,1.15 (default)
#   --very-sensitive       -D 20 -R 3 -N 0 -L 20 -i S,1,0.50
# 
# For --local:
#   --very-fast-local      -D 5 -R 1 -N 0 -L 25 -i S,1,2.00
#   --fast-local           -D 10 -R 2 -N 0 -L 22 -i S,1,1.75
#   --sensitive-local      -D 15 -R 2 -N 0 -L 20 -i S,1,0.75 (default)
#   --very-sensitive-local -D 20 -R 3 -N 0 -L 20 -i S,1,0.50
####bamCoverage#####
# --binSize INT 
#                   Size of the bins, in bases, for the output of the bigwig/bedgraph file. (Default: 50)
#                   Read coverage normalization options:
# --effectiveGenomeSize EFFECTIVEGENOMESIZE
#                  The effective genome size is the portion of the genome that is mappable. (default: None)
# --normalizeUsing {RPKM,CPM,BPM,RPGC,None}
#                  (Default: None)
# --ignoreForNormalization IGNOREFORNORMALIZATION [IGNOREFORNORMALIZATION ...]
#                  A list of space-delimited chromosome names containing those chromosomes that should be excluded for computing the normalization. 
#                  example: --ignoreForNormalization chrX chrM. (default: None)
# --skipNonCoveredRegions, --skipNAs
#                  This parameter determines if non-covered regions. The default is to treat those regions as having a value of zero. (default: False)
# --smoothLength INT bp
#                  The smooth length defines a window, larger than the binSize, to average the number of reads. 
#                  example: --binSize is set to 20 and the --smoothLength is set to 60, (default: None)
# 
# Read processing options:
#   ---ignoreDuplicates    
#                        reads with same orientation and start will be considered only once. paired: the mate's position considered. (default: False)
#   --minMappingQuality INT
#                         If set, only reads that have a mapping quality score of at least this are considered. (default: None)
#   --centerReads         
#                         Centered with respect to the fragment length.  (default: False)
#   --samFlagInclude INT  
#                         Include reads based on the SAM flag.  (Default: None)
#   --samFlagExclude INT  
#                         Exclude reads based on the SAM flag. (Default: None)
#   --minFragmentLength INT
#                         The minimum fragment length needed for read/pair inclusion. (Default: 0)
#   --maxFragmentLength INT
#                         The maximum fragment length needed for read/pair inclusion. (Default: 0)
    